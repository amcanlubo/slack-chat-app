(this["webpackJsonpslack-chat-app"]=this["webpackJsonpslack-chat-app"]||[]).push([[0],{46:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s.n(c),a=s(14),l=s.n(a),r=s(21),o=(s(46),s(3)),i=s(28),d=function(e,t){return"PASS_TO_CHATFORM"===t.type?Object(i.a)(Object(i.a)({},e),{},{ChatInfo:t.payload}):e},u=s(1),b={ChatInfo:""},j=Object(c.createContext)(b),x=function(e){var t=e.children,s=Object(c.useReducer)(d,b),n=Object(o.a)(s,2),a=n[0],l=n[1];return Object(u.jsx)(j.Provider,{value:[a,l],children:t})},f=s(5),h=s(4),m=s.n(h),p=s(12),O=(s(67),s.p+"static/media/chim2.f3835cfe.png"),v=s.p+"static/media/chatbubble.26d29a27.png",g=s(6),y=function(e){var t=e.setShowLoginModal,s=Object(c.useState)(!1),n=Object(o.a)(s,2),a=n[0],l=n[1],r=Object(f.g)(),i=Object(c.useRef)(null),d=Object(c.useRef)(null);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"z-50 container w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md rounded-lg px-8 py-2 pt-6 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){!function(e){e.preventDefault();var t={email:i.current.value,password:d.current.value};m.a.post("".concat("https://slackapi.avionschool.com","/api/v1/auth/sign_in"),t).then((function(e){p.b.success("You successfully logged in");var s=e.headers;r.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(e)),a&&(localStorage.email=t.email,localStorage.password=t.password),console.log(e)})).catch((function(e){return p.b.error("Check errors")}))}(e)},children:[Object(u.jsxs)("div",{className:"w-full flex justify-between items-center relative bottom-2",children:[Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(e){e.preventDefault(),t(!1)},children:Object(u.jsx)(g.c,{className:"h-8 w-8 mb-16 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})}),Object(u.jsx)("img",{src:O,alt:"chimchim",className:"relative left-16 h-28"}),Object(u.jsx)("img",{src:v,alt:"chatbubble",className:"relative bottom-2 h-28"})]}),Object(u.jsxs)("div",{className:"relative bottom-2",children:[Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email",ref:i})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password",ref:d})]}),Object(u.jsxs)("div",{className:"h-12 justify-center items-center content-center",children:[Object(u.jsx)("input",{type:"checkbox",className:"mr-2",checked:a,onChange:function(){l(!a)}}),Object(u.jsx)("span",{className:"checkmark",children:"Keep me logged in"})]}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white",children:"Sign In"})})]})]})})})},w=s.p+"static/media/chimchimmmm.6861fe93.png";var N=function(e){var t=e.setshowSignupModal,s=Object(f.g)(),n=Object(c.useRef)(null),a=Object(c.useRef)(null),l=Object(c.useRef)(null),r=Object(c.useState)(null),i=Object(o.a)(r,2),d=(i[0],i[1],"https://slackapi.avionschool.com");return Object(u.jsx)("div",{className:"z-50 container w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md rounded-lg px-8 pt-8 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){e.preventDefault();var t={email:n.current.value,password:a.current.value,password_confirmation:l.current.value};m.a.post("".concat(d,"/api/v1/auth/"),t).then((function(e){var t={email:n.current.value,password:a.current.value};m.a.post("".concat(d,"/api/v1/auth/sign_in"),t).then((function(t){var c=t.headers;console.log(e),console.log(t),p.b.success("You successfully registered"),n.current.value="",a.current.value="",l.current.value="",s.push({pathname:"/chatfeed",state:{headers:c}}),sessionStorage.setItem("headers",JSON.stringify(t)),console.log(t)})).catch((function(e){return p.b.error("Check errors")}))}))},children:[Object(u.jsxs)("div",{className:"relative bottom-5 right-2 w-full flex justify-between items-center content-center",children:[Object(u.jsx)("img",{src:w,alt:"chimchim",className:"h-28"}),Object(u.jsx)("h1",{className:"text-secondary desktop:text-2xl mobile:text-xs font-bold mr-4",children:"CREATE AN ACCOUNT"}),Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return t(!1)},children:Object(u.jsx)(g.c,{className:"h-8 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})})]}),Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{ref:n,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{ref:a,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Confirm Password"}),Object(u.jsx)("input",{ref:l,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"confirm password"})]}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white ",type:"submit",children:"Sign Up"})})]})})},C=function(e){var t=e.userHeaders,s=Object(f.g)(),n=Object(c.useState)({userHeaders:t}),a=Object(o.a)(n,2),l=(a[0],a[1]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("span",{className:"hover:text-secondary text-primary text-sm",onClick:function(){l([]),window.location.reload(),sessionStorage.clear(),localStorage.clear(),s.push("/")},children:"Logout"})})},k=s(9),S=function(e){var t=e.userHeaders,s=Object(c.useContext)(j),n=Object(o.a)(s,2),a=(n[0],n[1],Object(c.useState)(!1)),l=Object(o.a)(a,2),r=l[0],i=l[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"font-bold",type:"button",children:Object(u.jsx)(k.d,{className:"h-4 w-4"})}),r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-sm",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t",children:[Object(u.jsx)("h3",{className:"text-3xl text-black font-semibold",children:t.headers.uid}),Object(u.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return i(!1)},children:Object(u.jsx)("span",{className:"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),Object(u.jsx)("div",{className:"relative p-6 flex-auto",children:Object(u.jsx)("p",{className:"my-4 text-blueGray-500 text-lg leading-relaxed",children:"USER INFO"})}),Object(u.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:Object(u.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return i(!1)},children:"Close"})})]})})}),Object(u.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},I=function(e){var t=e.userHeaders;return Object(u.jsxs)("div",{className:"z-40 w-full justify-end flex px-5 text-white bg-yellow-400 h-6 content-center items-center ",children:[Object(u.jsxs)("div",{className:"flex justify-around content-center items-center",children:[Object(u.jsx)(S,{userHeaders:t}),Object(u.jsx)("span",{className:"pr-5 pl-1 text-sm",children:t.headers.uid})]}),Object(u.jsx)(C,{userHeaders:t})]})},R=s(15),F=function(e){var t=e.handleAddChannelButtonClick,s=e.userHeaders,n=e.updateChannelList,a=e.setUpdateChannelList,l=Object(c.useRef)(null),r=Object(c.useRef)(null),i=Object(c.useState)([]),d=Object(o.a)(i,2),b=d[0],j=d[1],x=Object(c.useState)([]),f=Object(o.a)(x,2),h=f[0],p=f[1],O=[];var v=function(){b.map((function(e){var t,s,c=(t=h,s=e.toLowerCase(),t.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().includes(s.toLowerCase())}))})));O.push(c[0].id)})),console.log(O)};return Object(c.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),s).then((function(e){p(e.data.data)})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsx)("div",{className:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center",id:"modal-example-small",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-sm",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-gray-200 rounded-t",children:[Object(u.jsx)("h3",{className:"text-3xl font-semibold",children:"Create Channel"}),Object(u.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-gray-300 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:t,children:Object(u.jsx)("span",{className:"bg-transparent h-6 w-6 text-2xl block outline-none focus:outline-none",children:Object(u.jsx)(g.c,{})})})]}),Object(u.jsxs)("div",{className:"relative p-6 flex-auto",children:[Object(u.jsxs)("label",{className:"block",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Channel Name"}),Object(u.jsx)("input",{ref:r,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"new-channel"})]}),Object(u.jsxs)("label",{className:"block pt-4",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Add Members"}),Object(u.jsx)("input",{ref:l,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"johndoe@email.com"}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white px-2 mt-1 font-bold rounded",onClick:function(){j([].concat(Object(R.a)(b),[l.current.value]))},children:"Add"})]}),Object(u.jsx)("div",{children:b.map((function(e){return Object(u.jsx)("p",{children:e})}))})]}),Object(u.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-200 rounded-b",children:[Object(u.jsx)("button",{className:"text-yellow-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"bg-yellow-500 text-white active:bg-yellow-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",onClick:function(e){!function(e){e.preventDefault(),v(),m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/channels "),{name:r.current.value,user_ids:O},s).then((function(e){console.log(e),a(!n),t(),j([])})).catch((function(e){return console.log(e)}))}(e)},children:"Create Channel"})]})]})})})},_=function(e,t){var s=n.a.useRef();n.a.useEffect((function(){s.current=e}),[e]),n.a.useEffect((function(){if(null!==t){var e=setInterval((function(){s.current()}),t);return function(){return clearInterval(e)}}}),[t])},D=function(e){var t=e.userHeaders,s=e.channels,n=e.updateChatForm,a=Object(c.useState)([]),l=Object(o.a)(a,2),r=l[0],i=l[1],d=Object(c.useState)(!0),b=Object(o.a)(d,2),j=b[0],x=b[1],f=Object(c.useState)([]),h=Object(o.a)(f,2),p=h[0],O=h[1],v=Object(c.useState)([]),g=Object(o.a)(v,2),y=(g[0],g[1],Object(c.useRef)([])),w=[],N=Object(c.useRef)([]);Object(c.useEffect)((function(){S(),C()}),[]),_((function(){S(),C()}),5e3);var C=function(){y.current.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=User"),t).then((function(e){e.data.data[0]&&(N.current.some((function(t){return t.id===e.data.data[0].id}))||(N.current=[].concat(Object(R.a)(N.current),[e.data.data[0]]),i(N.current)))}))}))},S=function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),t).then((function(e){s.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels/").concat(e.id),t).then((function(e){e.data.data.channel_members.map((function(e){var t,s;t=y.current,s=e.user_id,-1===t.indexOf(s)&&t.push(s)}))}))})),I(e.data.data)})).catch((function(e){return console.log(e)}))},I=function(e){e.map((function(e){y.current.includes(e.id)&&w.push({value:{id:e.id,name:e.uid},label:e.uid})})),O(w)};return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{className:"w-full text-left font-bold flex items-center hover:text-white p-1 cursor-pointer",onClick:function(){x(!j)},children:[Object(u.jsx)("span",{className:"px-1",children:j?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"Direct Messages"]}),j?r&&Object(u.jsx)(u.Fragment,{children:r.map((function(e){var s;return s=e.receiver.uid===t.headers.uid?e.sender:e.receiver,Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){n(s.id,s.uid,"User")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:s.uid})]})}))}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{className:"w-full flex sticky bottom-0  justify-center align-center py-2",children:Object(u.jsx)("button",{className:"w-11/12 rounded-full text-center text-secondary bg-yellow-300 hover:bg-yellow-400  py-2",onClick:function(){n(null,p,"User")},children:"New Message"})})]})},U=function(e){var t=e.userHeaders,s=(Object(c.useRef)(null),Object(c.useState)(!1)),n=Object(o.a)(s,2),a=n[0],l=n[1],r=Object(c.useState)([]),i=Object(o.a)(r,2),d=i[0],b=i[1],x=Object(c.useState)(!0),f=Object(o.a)(x,2),h=f[0],p=f[1],O=Object(c.useState)(""),v=Object(o.a)(O,2),y=v[0],w=v[1],N=Object(c.useState)(!0),C=Object(o.a)(N,2),S=C[0],I=C[1],R=Object(c.useState)(""),_=Object(o.a)(R,2),U=_[0],H=_[1],L=Object(c.useState)(""),E=Object(o.a)(L,2),z=E[0],M=E[1],A=Object(c.useContext)(j),P=Object(o.a)(A,2),T=(P[0],P[1]),B=Object(c.useState)(!1),J=Object(o.a)(B,2),G=(J[0],J[1]),Y=[],V={ID:y,name:U,receiverClass:z},W=function(e,t,s){w(e),H(t),M(s)};Object(c.useEffect)((function(){T({type:"PASS_TO_CHATFORM",payload:V})}),[y]);Object(c.useEffect)((function(){b([]),m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels"),t).then((function(e){if(e.data.errors)return null;e.data.data.map((function(e){return Y.push(e)}))})).catch((function(e){console.log(e)})).finally((function(){b(Y)}))}),[h]);var K=function(){l(!a)};return Object(u.jsxs)("div",{className:"absolute inset-y-0 left-0 z-50 -translate-x-full transform  transition duration-200 ease-in-out mobile:translate-x-0 mobile:relative",children:[Object(u.jsx)("div",{className:"mobile:block tablet:hidden desktop:hidden",children:Object(u.jsx)("button",{onClick:function(){return G(!1)},children:Object(u.jsx)(g.c,{className:" h-8 pl-4"})})}),a?Object(u.jsx)(F,{handleAddChannelButtonClick:K,userHeaders:t,updateChannelList:h,setUpdateChannelList:p}):Object(u.jsx)(u.Fragment,{}),Object(u.jsxs)("div",{className:"bg-secondary channels text-white text-opacity-70 overflow-y-scroll h-screen w-64 z-50 pt-2",children:[Object(u.jsxs)("div",{className:"channelsWrap",children:[Object(u.jsxs)("div",{className:"w-full text-left font-bold p-1 cursor-pointer flex items-center justify-between",children:[Object(u.jsxs)("div",{onClick:function(){I(!S)},className:"hover:text-white flex items-center w-full",children:[Object(u.jsx)("span",{className:"px-1",children:S?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"My Channels"]}),Object(u.jsx)("div",{className:"hover:text-white",onClick:K,children:Object(u.jsx)(k.c,{})})]}),S?d.map((function(e){return Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){W(e.id,e.name,"Channel")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:e.name})]})})):Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)(D,{userHeaders:t,channels:d,updateChatForm:W})]})]})},H=(s(27),s(41),s(22)),L=function(e){var t=e.userHeaders,s=Object(c.useContext)(j),n=Object(o.a)(s,2),a=n[0],l=(n[1],Object(c.useState)([])),r=Object(o.a)(l,2),i=r[0],d=r[1],b=Object(c.useState)([]),x=Object(o.a)(b,2),f=x[0],h=(x[1],Object(c.useState)([])),O=Object(o.a)(h,2),v=O[0],y=O[1],w=Object(c.useState)(!1),N=Object(o.a)(w,2),C=N[0],S=N[1],I=Object(c.useRef)([]),R=Object(c.useState)(),F=Object(o.a)(R,2),_=F[0],D=F[1],U="https://slackapi.avionschool.com",L=[];Object(c.useEffect)((function(){m.a.get("".concat(U,"/api/v1/channels/").concat(a.ChatInfo.ID),t).then((function(e){if(e.data.errors)return null;e.data.data.channel_members.forEach((function(e){i.forEach((function(t){t.id===e.user_id&&L.push(t)}))})),y(L)})).catch((function(e){console.log(e)}))}),[a,f]);return Object(c.useEffect)((function(){m.a.get("".concat(U,"/api/v1/users"),t).then((function(e){d(e.data.data),e.data.data.map((function(e){I.current.push({value:e.id,label:e.uid})})),console.log(I)})).catch((function(e){console.log(e)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"text-white active:text-primary font-bold uppercase text-sm px-6 py-3 outline-none focus:outline-none mb-1 ease-linear transition-all duration-150 relative right-0",type:"button",onClick:function(){return S(!0)},children:Object(u.jsx)(k.e,{className:"h-6 w-6"})}),C?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"text-black container  w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 inset-0 z-50 outline-none focus:outline-none",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"w-full flex justify-between items-center content-center",children:[Object(u.jsx)("div",{className:"flex justify-between items-center px-6 content-center",children:Object(u.jsx)("span",{className:"text-3xl font-semibold",children:a.ChatInfo.name})}),Object(u.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:Object(u.jsx)("button",{className:"text-secondary background-transparent font-bold uppercase text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return S(!1)},children:Object(u.jsx)(g.c,{className:"h-6 w-6"})})})]}),Object(u.jsxs)("div",{className:"relative  p-6 flex flex-col max-h-72",children:[Object(u.jsx)("span",{className:"text-gray-500",children:"Members"}),Object(u.jsx)("div",{className:"z-10 overflow-y-auto my-3",children:v.map((function(e){return Object(u.jsx)("ul",{className:"my-4 overflow-auto text-sm z-0",children:e.uid})}))}),Object(u.jsxs)("div",{children:[Object(u.jsx)(H.a,{options:I.current,onChange:function(e){D(e.value)}}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white w-14 h-7 px-2 mt-1 font-bold rounded",onClick:function(){m.a.post("".concat(U,"/api/v1/channel/add_member"),{id:a.ChatInfo.ID,member_id:_},t).then((function(e){console.log(e),p.b.success("User has been added!"),D()})).catch((function(e){return alert(e)}))},children:"Add"})]})]})]})})}),Object(u.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},E=function(){var e=Object(c.useRef)();return Object(c.useEffect)((function(){return e.current.scrollIntoView()})),Object(u.jsx)("div",{ref:e})},z=s.p+"static/media/NoChatYet.281bc00c.svg",M=function(e){var t,s,n=e.userHeaders,a=Object(c.useRef)(null),l=Object(c.useRef)([]),r=[],i="https://slackapi.avionschool.com",d=Object(c.useContext)(j),b=Object(o.a)(d,2),x=b[0],f=(b[1],Object(c.useState)(!1)),h=Object(o.a)(f,2),p=h[0],O=h[1],v=Object(c.useState)([]),y=Object(o.a)(v,2),w=y[0],N=y[1],C=Object(c.useState)([]),S=Object(o.a)(C,2),I=S[0],F=S[1],D=Object(c.useState)(),U=Object(o.a)(D,2),M=U[0],A=U[1],P=Object(c.useState)(!1),T=Object(o.a)(P,2),B=(T[0],T[1]);Object(c.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),n).then((function(e){var t;F(null===(t=e.data)||void 0===t?void 0:t.data)})).catch((function(e){console.log(e)}))}),[]),!x.ChatInfo.ID&&x.ChatInfo.name&&x.ChatInfo.name.map((function(e){I.map((function(t){t.id===e&&r.push({value:{id:t.id,name:t.uid},label:t.uid})}))}));var J=function(e,t){m.a.get("".concat(i,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=").concat(t),n).then((function(e){if(0===l.current.length||e.data.data.length!==l.current.length){if(N([]),e.data.errors)return null;e.data.data.map((function(e){l.current.push(e),N((function(t){return[].concat(Object(R.a)(t),[e])}))}))}O(!1)})).catch((function(e){console.log(e)}))};Object(c.useEffect)((function(){return O(!0),"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?J(x.ChatInfo.ID,x.ChatInfo.receiverClass):"object"===typeof x.ChatInfo.name&&null===x.ChatInfo.ID||J(M.value.id,"User"),N([])}),[x,M]),_((function(){"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?J(x.ChatInfo.ID,x.ChatInfo.receiverClass):"object"===typeof x.ChatInfo.name&&null===x.ChatInfo.ID||J(M.value.id,"User")}),1e3);var G=function(e,t){e.preventDefault(),m.a.post("".concat(i,"/api/v1/messages"),{receiver_id:t,receiver_class:x.ChatInfo.receiverClass,body:a.current.value},n).then((function(e){"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?J(x.ChatInfo.ID,x.ChatInfo.receiverClass):J(M.value.id,"User"),a.current.value=""})).catch((function(e){return alert(e)}))},Y=[];return Object(u.jsxs)("div",{className:"flex h-full overflow-auto flex-col",children:[Object(u.jsxs)("div",{class:"z-10 bg-yellow-300 text-white sticky top-0 flex items-center justify-between",children:[Object(u.jsx)("div",{className:"mobile:block tablet:hidden desktop:hidden",children:Object(u.jsx)("button",{onClick:function(){return B(!0)},children:Object(u.jsx)(g.a,{className:" h-8 pl-4"})})}),"object"!==typeof x.ChatInfo.name?Object(u.jsx)("div",{className:"pl-6 font-bold text-xl",children:x.ChatInfo.name}):Object(u.jsx)(H.a,{className:"w-full px-2 text-secondary outline-none",value:M,options:x.ChatInfo.name,onChange:function(e){A(e),J(e.value.id,"User")}}),x.ChatInfo.receiverClass?Object(u.jsx)(L,{userHeaders:n}):Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)("div",{className:"flex-1 flex flex-col",children:Object(u.jsxs)("div",{className:"h-full sm:items-center px-5 bg-yellow-100 w-full z-0 ",children:["Channel"!==x.ChatInfo.receiverClass?Object(u.jsxs)("div",{className:"h-full relative flex flex-col justify-center text-center items-center content-center",children:[Object(u.jsx)("img",{src:z,alt:"no chat",className:"h-80"}),Object(u.jsx)("span",{className:"pt-8 text-md mobile:text-center font-Poppins font-bold text-yellow-300",children:"Select a channel/user to begin chatting"})]}):p?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]})]}):Object(u.jsx)("div",{children:w.map((function(e,c){var a;return Y=[],t=new Date(e.created_at).toDateString().slice(0,15),s=function(e){var t=new Date(e),s=t.getHours(),c=t.getMinutes(),n=s>=12?"PM":"AM";return c<10&&(c="0"+c),"".concat(s=(s%=12)||12,":").concat(c," ").concat(n)}(e.created_at),t!==new Date(null===(a=w[c-1])||void 0===a?void 0:a.created_at).toDateString()&&Y.push(Object(u.jsxs)("div",{className:"w-full flex justify-center items-center pt-2",children:[Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"}),Object(u.jsx)("div",{className:"w-auto px-1 border border-secondary rounded-full flex justify-center items-center content-center",children:Object(u.jsxs)("span",{className:"text-xs",children:[" ",t," "]})}),Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"})]})),Y.push(Object(u.jsx)("ul",{className:"flex justify-between",children:Object(u.jsx)("div",{className:"w-full",children:Object(u.jsxs)("div",{className:"flex content-center items-center",children:[Object(u.jsx)(k.d,{className:"h-10 w-10 text-secondary"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("span",{className:"px-1 text-xs font-bold",children:[" ",e.sender.uid," "]}),Object(u.jsxs)("span",{className:"text-xs",children:[" ",s," "]})]}),Object(u.jsx)("span",{className:e.sender.uid===n.headers.uid?"chat_bubble outgoing text-sm shadow-md":"chat_bubble incoming text-sm shadow-md",children:e.body})]})]})})})),Y}))}),Object(u.jsx)(E,{userHeaders:n})]})}),Object(u.jsx)("form",{className:"flex-1w-full sticky bottom-0 bg-secondary z-10",children:Object(u.jsx)("div",{className:"p-2 sm:mb-0",children:Object(u.jsxs)("div",{className:"relative flex",children:[Object(u.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center content-center px-1",children:Object(u.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center rounded-full h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none",onClick:function(e){"object"===typeof x.ChatInfo.name?G(e,M.value.id):G(e,x.ChatInfo.ID)},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 transform rotate-90",children:Object(u.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})}),Object(u.jsx)("input",{type:"text",placeholder:"Write Something...",className:"w-full h-10 focus:outline-none focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-8 bg-gray-200 rounded-full py-3",ref:a})]})})})]})},A=function(){var e=Object(f.h)().state;return e?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(U,{userHeaders:e}),Object(u.jsxs)("div",{className:"flex flex-col w-full",children:[Object(u.jsx)(I,{userHeaders:e}),Object(u.jsx)(M,{userHeaders:e})]})]})}):Object(u.jsx)(f.a,{to:"/"})},P=s.p+"static/media/BT21.42c38516.gif",T=s.p+"static/media/bubble.d07a5634.png",B=function(){var e=Object(f.g)(),t=Object(c.useState)(!1),s=Object(o.a)(t,2),n=s[0],a=s[1],l=Object(c.useState)(!1),r=Object(o.a)(l,2),i=r[0],d=r[1];Object(c.useEffect)((function(){localStorage.email&&localStorage.password&&b()}),[]);var b=function(){var t={email:localStorage.email,password:localStorage.password};m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/auth/sign_in"),t).then((function(t){var s=t.headers;e.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(t))})).catch((function(e){return p.b.error("Invalid credentials")}))};return Object(u.jsxs)("div",{className:"flex justify-between container m-auto h-screen",children:[Object(u.jsx)("div",{className:"p-10 flex flex-col justify-around  items-center content-center w-6/12 bg-white",children:Object(u.jsx)("img",{src:P,alt:"illustration",className:"h-3/4"})}),Object(u.jsx)("div",{className:"flex-grow flex bg-primary justify-center items-center content-center",children:Object(u.jsxs)("div",{className:"text-secondary flex flex-col justify-center items-center content-center rounded-xl bg-white roundedx p-10",children:[Object(u.jsx)("img",{src:T,alt:"logo",className:"h-80"}),Object(u.jsx)("button",{onClick:function(){return a(!0)},className:"bg-secondary px-5 py-3 w-40 text-primary transition ease-in-out duration-150\r font-bold uppercase text-sm rounded-full hover:text-white motion-safe:hover:scale-110",type:"button",children:"Sign in"}),n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{setShowLoginModal:a}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{children:"Don\u2019t have an account?"}),Object(u.jsx)("span",{onClick:function(){return d(!0)},className:"font-medium text-secondary underline hover:font-bold hover:text-yellow-400",children:"Sign up here"}),i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(N,{setshowSignupModal:d}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{})]})})]})},J=function(){return m.a.defaults.baseURL="https://slackapi.avionschool.com/",Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(r.b,{children:Object(u.jsx)(x,{children:Object(u.jsxs)(f.d,{children:[Object(u.jsx)(f.b,{exact:!0,path:"/home",children:Object(u.jsx)(B,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/login",children:Object(u.jsx)(y,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/signup",children:Object(u.jsx)(N,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/chatfeed",children:Object(u.jsx)(A,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/",children:Object(u.jsx)(B,{})})]})})}),Object(u.jsx)(p.a,{theme:"colored"})]})};l.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(J,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.37f41f9a.chunk.js.map