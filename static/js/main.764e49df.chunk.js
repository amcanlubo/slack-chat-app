(this["webpackJsonpslack-chat-app"]=this["webpackJsonpslack-chat-app"]||[]).push([[0],{46:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(14),l=s.n(a),o=s(21),r=(s(46),s(3)),i=s(28),d=function(e,t){return"PASS_TO_CHATFORM"===t.type?Object(i.a)(Object(i.a)({},e),{},{ChatInfo:t.payload}):e},u=s(1),b={ChatInfo:""},j=Object(n.createContext)(b),x=function(e){var t=e.children,s=Object(n.useReducer)(d,b),c=Object(r.a)(s,2),a=c[0],l=c[1];return Object(u.jsx)(j.Provider,{value:[a,l],children:t})},f=s(5),h=s(4),m=s.n(h),p=s(12),O=(s(67),s.p+"static/media/chim2.f3835cfe.png"),v=s.p+"static/media/chatbubble.26d29a27.png",g=s(8),y=function(e){var t=e.setShowLoginModal,s=Object(n.useState)(!1),c=Object(r.a)(s,2),a=c[0],l=c[1],o=Object(f.g)(),i=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"z-50 container  w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md h-screen mobile:h-auto rounded-lg px-8 py-2 pt-12 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){!function(e){e.preventDefault();var t={email:i.current.value,password:d.current.value};m.a.post("".concat("https://slackapi.avionschool.com","/api/v1/auth/sign_in"),t).then((function(e){p.b.success("You successfully logged in");var s=e.headers;o.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(e)),a&&(localStorage.email=t.email,localStorage.password=t.password),console.log(e)})).catch((function(e){return p.b.error("Check errors")}))}(e)},children:[Object(u.jsxs)("div",{className:"w-full flex items-center relative bottom-2",children:[Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(e){e.preventDefault(),t(!1)},children:Object(u.jsx)(g.b,{className:"h-8 w-8 mb-16 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})}),Object(u.jsxs)("div",{className:"flex justify-between pt-12 mobile:pt-0 mobile:w-3/4",children:[Object(u.jsx)("img",{src:O,alt:"chimchim",className:"relative h-28 mobile:left-16"}),Object(u.jsx)("img",{src:v,alt:"chatbubble",className:"relative bottom-2 right-8 mobile:right-0 h-24 mobile:h-28"})]})]}),Object(u.jsxs)("div",{className:"relative bottom-2",children:[Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email",ref:i})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password",ref:d})]}),Object(u.jsxs)("div",{className:"h-12 justify-center items-center content-center",children:[Object(u.jsx)("input",{type:"checkbox",className:"mr-2",checked:a,onChange:function(){l(!a)}}),Object(u.jsx)("span",{className:"checkmark",children:"Keep me logged in"})]}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white",children:"Sign In"})})]})]})})})},w=s.p+"static/media/chimchimmmm.6861fe93.png";var N=function(e){var t=e.setshowSignupModal,s=Object(f.g)(),c=Object(n.useRef)(null),a=Object(n.useRef)(null),l=Object(n.useRef)(null),o=Object(n.useState)(null),i=Object(r.a)(o,2),d=(i[0],i[1]),b="https://slackapi.avionschool.com";return Object(u.jsx)("div",{className:"z-50 container w-full  max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md mobile:h-auto h-screen rounded-lg px-8 pt-8 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){e.preventDefault();var t={email:c.current.value,password:a.current.value,password_confirmation:l.current.value};m.a.post("".concat(b,"/api/v1/auth/"),t).then((function(e){var t={email:c.current.value,password:a.current.value};m.a.post("".concat(b,"/api/v1/auth/sign_in"),t).then((function(t){var n=t.headers;console.log(e),console.log(t),p.b.success("You successfully registered"),c.current.value="",a.current.value="",l.current.value="",s.push({pathname:"/chatfeed",state:{headers:n}}),sessionStorage.setItem("headers",JSON.stringify(t)),console.log(t)})).catch((function(e){return p.b.error("Check errors")}))}))},children:[Object(u.jsxs)("div",{className:"relative bottom-5 right-2 w-full mobile:pt-0 pt-12 flex justify-between items-center content-center",children:[Object(u.jsx)("img",{src:w,alt:"chimchim",className:"h-28"}),Object(u.jsx)("h1",{className:"text-secondary desktop:text-2xl mobile:text-xs font-bold mr-4",children:"CREATE AN ACCOUNT"}),Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return t(!1)},children:Object(u.jsx)(g.b,{className:"h-8 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})})]}),Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{ref:c,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{ref:a,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Confirm Password"}),Object(u.jsx)("input",{ref:l,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"confirm password"})]}),Object(u.jsx)("label",{htmlFor:"upload-button",children:Object(u.jsx)("span",{className:"image-button"})}),Object(u.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){d({files:e.target.files,text:""})}}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white ",type:"submit",children:"Sign Up"})})]})})},C=function(e){var t=e.userHeaders,s=Object(f.g)(),c=Object(n.useState)({userHeaders:t}),a=Object(r.a)(c,2),l=(a[0],a[1]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("span",{className:"hover:text-secondary text-primary text-sm",onClick:function(){l([]),window.location.reload(),sessionStorage.clear(),localStorage.clear(),s.push("/")},children:"Logout"})})},k=s(9),S=function(e){var t=e.userHeaders,s=Object(n.useContext)(j),c=Object(r.a)(s,2),a=(c[0],c[1],Object(n.useState)(!1)),l=Object(r.a)(a,2),o=l[0],i=l[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"font-bold",type:"button",children:Object(u.jsx)(k.d,{className:"h-4 w-4"})}),o?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-sm",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t",children:[Object(u.jsx)("h3",{className:"text-3xl text-black font-semibold",children:t.headers.uid}),Object(u.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return i(!1)},children:Object(u.jsx)("span",{className:"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),Object(u.jsx)("div",{className:"relative p-6 flex-auto",children:Object(u.jsx)("p",{className:"my-4 text-blueGray-500 text-lg leading-relaxed",children:"USER INFO"})}),Object(u.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:Object(u.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return i(!1)},children:"Close"})})]})})}),Object(u.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},I=function(e){var t=e.userHeaders;return Object(u.jsxs)("div",{className:"z-30 w-full justify-end flex px-5 text-white bg-yellow-400 h-6 content-center items-center ",children:[Object(u.jsxs)("div",{className:"flex justify-around content-center items-center",children:[Object(u.jsx)(S,{userHeaders:t}),Object(u.jsx)("span",{className:"pr-5 pl-1 text-sm",children:t.headers.uid})]}),Object(u.jsx)(C,{userHeaders:t})]})},F=s(15),R=function(e){var t=e.handleAddChannelButtonClick,s=e.userHeaders,c=e.updateChannelList,a=e.setUpdateChannelList,l=Object(n.useRef)(null),o=Object(n.useRef)(null),i=Object(n.useState)([]),d=Object(r.a)(i,2),b=d[0],j=d[1],x=Object(n.useState)([]),f=Object(r.a)(x,2),h=f[0],p=f[1],O=[];var v=function(){b.map((function(e){var t,s,n=(t=h,s=e.toLowerCase(),t.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().includes(s.toLowerCase())}))})));O.push(n[0].id)})),console.log(O)};return Object(n.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),s).then((function(e){p(e.data.data)})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsx)("div",{className:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center",id:"modal-example-small",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-sm",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-gray-200 rounded-t",children:[Object(u.jsx)("h3",{className:"text-3xl font-semibold",children:"Create Channel"}),Object(u.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-gray-300 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:t,children:Object(u.jsx)("span",{className:"bg-transparent h-6 w-6 text-2xl block outline-none focus:outline-none",children:Object(u.jsx)(g.b,{})})})]}),Object(u.jsxs)("div",{className:"relative p-6 flex-auto",children:[Object(u.jsxs)("label",{className:"block",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Channel Name"}),Object(u.jsx)("input",{ref:o,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"new-channel"})]}),Object(u.jsxs)("label",{className:"block pt-4",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Add Members"}),Object(u.jsx)("input",{ref:l,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"johndoe@email.com"}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white px-2 mt-1 font-bold rounded",onClick:function(){j([].concat(Object(F.a)(b),[l.current.value]))},children:"Add"})]}),Object(u.jsx)("div",{children:b.map((function(e){return Object(u.jsx)("p",{children:e})}))})]}),Object(u.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-200 rounded-b",children:[Object(u.jsx)("button",{className:"text-yellow-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"bg-yellow-500 text-white active:bg-yellow-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",onClick:function(e){!function(e){e.preventDefault(),v(),m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/channels "),{name:o.current.value,user_ids:O},s).then((function(e){console.log(e),a(!c),t(),j([])})).catch((function(e){return console.log(e)}))}(e)},children:"Create Channel"})]})]})})})},_=function(e,t){var s=c.a.useRef();c.a.useEffect((function(){s.current=e}),[e]),c.a.useEffect((function(){if(null!==t){var e=setInterval((function(){s.current()}),t);return function(){return clearInterval(e)}}}),[t])},D=function(e){var t=e.userHeaders,s=e.channels,c=e.updateChatForm,a=Object(n.useState)([]),l=Object(r.a)(a,2),o=l[0],i=l[1],d=Object(n.useState)(!1),b=Object(r.a)(d,2),j=b[0],x=b[1],f=Object(n.useState)([]),h=Object(r.a)(f,2),p=h[0],O=h[1],v=Object(n.useState)([]),g=Object(r.a)(v,2),y=(g[0],g[1],Object(n.useRef)([])),w=[],N=Object(n.useRef)([]);Object(n.useEffect)((function(){S(),C()}),[]),_((function(){S(),C()}),5e3);var C=function(){y.current.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=User"),t).then((function(e){e.data.data[0]&&(N.current.some((function(t){return t.id===e.data.data[0].id}))||(N.current=[].concat(Object(F.a)(N.current),[e.data.data[0]]),i(N.current)))}))}))},S=function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),t).then((function(e){s.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels/").concat(e.id),t).then((function(e){e.data.data.channel_members.map((function(e){var t,s;t=y.current,s=e.user_id,-1===t.indexOf(s)&&t.push(s)}))}))})),I(e.data.data)})).catch((function(e){return console.log(e)}))},I=function(e){e.map((function(e){y.current.includes(e.id)&&w.push({value:{id:e.id,name:e.uid},label:e.uid})})),O(w)};return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"w-full text-left font-bold flex items-center hover:text-white p-1 cursor-pointer",onClick:function(){x(!j)},children:[Object(u.jsx)("span",{className:"px-1",children:j?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"Direct Messages"]}),j?o&&Object(u.jsx)(u.Fragment,{children:o.map((function(e){var s;return s=e.receiver.uid===t.headers.uid?e.sender:e.receiver,Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){c(s.id,s.uid,"User")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:s.uid})]})}))}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{className:"w-full flex sticky bottom-0  justify-center align-center py-2",children:Object(u.jsx)("button",{className:"w-11/12 rounded-full text-center text-secondary bg-yellow-300 hover:bg-yellow-400  py-2",onClick:function(){c(null,p,"User")},children:"New Message"})})]})},U=function(e){var t=e.userHeaders,s=e.toggleSidebar,c=(Object(n.useRef)(null),Object(n.useState)(!1)),a=Object(r.a)(c,2),l=a[0],o=a[1],i=Object(n.useState)([]),d=Object(r.a)(i,2),b=d[0],x=d[1],f=Object(n.useState)(!0),h=Object(r.a)(f,2),p=h[0],O=h[1],v=Object(n.useState)(""),g=Object(r.a)(v,2),y=g[0],w=g[1],N=Object(n.useState)(!1),C=Object(r.a)(N,2),S=C[0],I=C[1],F=Object(n.useState)(""),_=Object(r.a)(F,2),U=_[0],H=_[1],L=Object(n.useState)(""),E=Object(r.a)(L,2),z=E[0],M=E[1],A=Object(n.useContext)(j),T=Object(r.a)(A,2),P=(T[0],T[1]),B=[],J={ID:y,name:U,receiverClass:z},G=function(e,t,s){w(e),H(t),M(s)};Object(n.useEffect)((function(){P({type:"PASS_TO_CHATFORM",payload:J})}),[y]);Object(n.useEffect)((function(){x([]),m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels"),t).then((function(e){if(e.data.errors)return null;e.data.data.map((function(e){return B.push(e)}))})).catch((function(e){console.log(e)})).finally((function(){x(B)}))}),[p]);var Y=function(){o(!l)};return Object(u.jsxs)(u.Fragment,{children:[l?Object(u.jsx)(R,{handleAddChannelButtonClick:Y,userHeaders:t,updateChannelList:p,setUpdateChannelList:O}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("div",{className:s?"absolute inset-y-0 left-0 z-40  transform  transition duration-200 ease-in-out mobile:translate-x-0 mobile:relative":"absolute inset-y-0 left-0 z-50 -translate-x-full transform  transition duration-200 ease-in-out mobile:translate-x-0 mobile:relative",children:Object(u.jsxs)("div",{className:"bg-secondary channels text-white text-opacity-70 overflow-y-scroll h-screen w-64 z-50 pt-2",children:[Object(u.jsxs)("div",{className:"channelsWrap",children:[Object(u.jsxs)("div",{className:"w-full text-left font-bold p-1 cursor-pointer flex items-center justify-between",children:[Object(u.jsxs)("div",{onClick:function(){I(!S)},className:"hover:text-white flex items-center w-full",children:[Object(u.jsx)("span",{className:"px-1",children:S?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"My Channels"]}),Object(u.jsx)("div",{className:"hover:text-white",onClick:Y,children:Object(u.jsx)(k.c,{})})]}),S?b.map((function(e){return Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){G(e.id,e.name,"Channel")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:e.name})]})})):Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)(D,{userHeaders:t,channels:b,updateChatForm:G})]})})]})},H=(s(27),s(41),s(22)),L=function(e){var t=e.userHeaders,s=Object(n.useContext)(j),c=Object(r.a)(s,2),a=c[0],l=(c[1],Object(n.useState)([])),o=Object(r.a)(l,2),i=o[0],d=o[1],b=Object(n.useState)([]),x=Object(r.a)(b,2),f=x[0],h=(x[1],Object(n.useState)([])),O=Object(r.a)(h,2),v=O[0],y=O[1],w=Object(n.useState)(!1),N=Object(r.a)(w,2),C=N[0],S=N[1],I=Object(n.useRef)([]),F=Object(n.useState)(),R=Object(r.a)(F,2),_=R[0],D=R[1],U="https://slackapi.avionschool.com",L=[];Object(n.useEffect)((function(){m.a.get("".concat(U,"/api/v1/channels/").concat(a.ChatInfo.ID),t).then((function(e){if(e.data.errors)return null;e.data.data.channel_members.forEach((function(e){i.forEach((function(t){t.id===e.user_id&&L.push(t)}))})),y(L)})).catch((function(e){console.log(e)}))}),[a,f]);return Object(n.useEffect)((function(){m.a.get("".concat(U,"/api/v1/users"),t).then((function(e){d(e.data.data),e.data.data.map((function(e){I.current.push({value:e.id,label:e.uid})})),console.log(I)})).catch((function(e){console.log(e)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"text-white active:text-primary font-bold uppercase text-sm px-6 py-3 outline-none focus:outline-none mb-1 ease-linear transition-all duration-150 relative right-0",type:"button",onClick:function(){return S(!0)},children:Object(u.jsx)(k.e,{className:"h-6 w-6"})}),C?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"text-black container  w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 inset-0 z-50 outline-none focus:outline-none",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"w-full flex justify-between items-center content-center",children:[Object(u.jsx)("div",{className:"flex justify-between items-center px-6 content-center",children:Object(u.jsx)("span",{className:"text-3xl font-semibold",children:a.ChatInfo.name})}),Object(u.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:Object(u.jsx)("button",{className:"text-secondary background-transparent font-bold uppercase text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return S(!1)},children:Object(u.jsx)(g.b,{className:"h-6 w-6"})})})]}),Object(u.jsxs)("div",{className:"relative  p-6 flex flex-col max-h-72",children:[Object(u.jsx)("span",{className:"text-gray-500",children:"Members"}),Object(u.jsx)("div",{className:"z-10 overflow-y-auto my-3",children:v.map((function(e){return Object(u.jsx)("ul",{className:"my-4 overflow-auto text-sm z-0",children:e.uid})}))}),Object(u.jsxs)("div",{children:[Object(u.jsx)(H.a,{options:I.current,onChange:function(e){D(e.value)}}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white w-14 h-7 px-2 mt-1 font-bold rounded",onClick:function(){m.a.post("".concat(U,"/api/v1/channel/add_member"),{id:a.ChatInfo.ID,member_id:_},t).then((function(e){console.log(e),p.b.success("User has been added!"),D()})).catch((function(e){return alert(e)}))},children:"Add"})]})]})]})})}),Object(u.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},E=function(){var e=Object(n.useRef)();return Object(n.useEffect)((function(){return e.current.scrollIntoView()})),Object(u.jsx)("div",{ref:e})},z=s.p+"static/media/NoChatYet.281bc00c.svg",M="h-1 w-6 my-0.5 rounded-full bg-secondary transition ease transform duration-300",A=function(e){var t,s,c=e.userHeaders,a=e.sidebarToggle,l=e.toggleSidebar,o=Object(n.useRef)(null),i=Object(n.useRef)([]),d=[],b="https://slackapi.avionschool.com",x=Object(n.useContext)(j),f=Object(r.a)(x,2),h=f[0],p=(f[1],Object(n.useState)(!1)),O=Object(r.a)(p,2),v=O[0],g=O[1],y=Object(n.useState)([]),w=Object(r.a)(y,2),N=w[0],C=w[1],S=Object(n.useState)([]),I=Object(r.a)(S,2),R=I[0],D=I[1],U=Object(n.useState)(),A=Object(r.a)(U,2),T=A[0],P=A[1],B=Object(n.useState)(!1),J=Object(r.a)(B,2);J[0],J[1];Object(n.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),c).then((function(e){var t;D(null===(t=e.data)||void 0===t?void 0:t.data)})).catch((function(e){console.log(e)})),C([])}),[]),!h.ChatInfo.ID&&h.ChatInfo.name&&h.ChatInfo.name.map((function(e){R.map((function(t){t.id===e&&d.push({value:{id:t.id,name:t.uid},label:t.uid})}))}));var G=function(e,t){m.a.get("".concat(b,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=").concat(t),c).then((function(e){if(0===i.current.length||e.data.data.length!==i.current.length){if(C([]),e.data.errors)return null;e.data.data.map((function(e){i.current.push(e),C((function(t){return[].concat(Object(F.a)(t),[e])}))}))}g(!1)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){return g(!0),"object"!==typeof h.ChatInfo.name||null!==h.ChatInfo.ID?G(h.ChatInfo.ID,h.ChatInfo.receiverClass):"object"===typeof h.ChatInfo.name&&null===h.ChatInfo.ID||G(T.value.id,"User"),C([])}),[h,T]),_((function(){"object"!==typeof h.ChatInfo.name||null!==h.ChatInfo.ID?G(h.ChatInfo.ID,h.ChatInfo.receiverClass):"object"===typeof h.ChatInfo.name&&null===h.ChatInfo.ID||G(T.value.id,"User")}),1e3);var Y=function(e,t){e.preventDefault(),m.a.post("".concat(b,"/api/v1/messages"),{receiver_id:t,receiver_class:h.ChatInfo.receiverClass,body:o.current.value},c).then((function(e){"object"!==typeof h.ChatInfo.name||null!==h.ChatInfo.ID?G(h.ChatInfo.ID,h.ChatInfo.receiverClass):G(T.value.id,"User"),o.current.value=""})).catch((function(e){return alert(e)}))},V=[];return Object(u.jsxs)("div",{className:"flex h-full overflow-auto flex-col",children:[Object(u.jsxs)("div",{class:"z-10 bg-yellow-300 text-white sticky top-0 flex items-center justify-between mobile:flex-row-reverse",children:[h.ChatInfo.receiverClass?Object(u.jsx)(L,{userHeaders:c}):Object(u.jsx)(u.Fragment,{}),"object"!==typeof h.ChatInfo.name?Object(u.jsx)("div",{className:" font-bold truncate px-6 text-xl",children:h.ChatInfo.name}):Object(u.jsx)(H.a,{className:"w-full px-2 text-secondary outline-none",value:T,options:h.ChatInfo.name,onChange:function(e){P(e),G(e.value.id,"User")}}),Object(u.jsx)("div",{className:"mobile:block tablet:hidden desktop:hidden",children:Object(u.jsxs)("button",{className:"flex flex-col h-12 w-12 rounded justify-center items-center",onClick:function(){return a()},children:[Object(u.jsx)("div",{className:"".concat(M," ").concat(l?"rotate-45 translate-y-2 opacity-100":"opacity-100")}),Object(u.jsx)("div",{className:"".concat(M," ").concat(l?"opacity-0":"opacity-100")}),Object(u.jsx)("div",{className:"".concat(M," ").concat(l?"-rotate-45 -translate-y-2 opacity-100":"opacity-100")})]})})]}),Object(u.jsx)("div",{className:"flex-1 flex flex-col",children:Object(u.jsxs)("div",{className:"h-full sm:items-center px-5 bg-yellow-100 w-full z-0 ",children:[h.ChatInfo.name?v?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]})]}):Object(u.jsx)("div",{children:N.map((function(e,n){var a;return V=[],t=new Date(e.created_at).toDateString().slice(0,15),s=function(e){var t=new Date(e),s=t.getHours(),n=t.getMinutes(),c=s>=12?"PM":"AM";return n<10&&(n="0"+n),"".concat(s=(s%=12)||12,":").concat(n," ").concat(c)}(e.created_at),t!==new Date(null===(a=N[n-1])||void 0===a?void 0:a.created_at).toDateString()&&V.push(Object(u.jsxs)("div",{className:"w-full flex justify-center items-center pt-2",children:[Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"}),Object(u.jsx)("div",{className:"w-auto px-1 border border-secondary rounded-full flex justify-center items-center content-center",children:Object(u.jsxs)("span",{className:"text-xs",children:[" ",t," "]})}),Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"})]})),V.push(Object(u.jsx)("ul",{className:"flex justify-between",children:Object(u.jsx)("div",{className:"w-full",children:Object(u.jsxs)("div",{className:"flex content-center items-center",children:[Object(u.jsx)(k.d,{className:"h-10 w-10 text-secondary"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("span",{className:"px-1 text-xs font-bold",children:[" ",e.sender.uid," "]}),Object(u.jsxs)("span",{className:"text-xs",children:[" ",s," "]})]}),Object(u.jsx)("span",{className:e.sender.uid===c.headers.uid?"chat_bubble outgoing text-sm shadow-md":"chat_bubble incoming text-sm shadow-md",children:e.body})]})]})})})),V}))}):Object(u.jsxs)("div",{className:"h-full relative flex flex-col justify-center text-center items-center content-center",children:[Object(u.jsx)("img",{src:z,alt:"no chat",className:"h-80"}),Object(u.jsx)("span",{className:"pt-8 text-md mobile:text-center font-Poppins font-bold text-yellow-300",children:"Select a channel/user to begin chatting"})]}),Object(u.jsx)(E,{userHeaders:c})]})}),Object(u.jsx)("form",{className:h.ChatInfo.name?"flex-1w-full sticky bottom-0 bg-secondary z-10":"hidden",children:Object(u.jsx)("div",{className:"p-2 sm:mb-0",children:Object(u.jsxs)("div",{className:"relative flex",children:[Object(u.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center content-center px-1",children:Object(u.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center rounded-full h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none",onClick:function(e){"object"===typeof h.ChatInfo.name?Y(e,T.value.id):Y(e,h.ChatInfo.ID)},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 transform rotate-90",children:Object(u.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})}),Object(u.jsx)("input",{type:"text",placeholder:"Write Something...",className:"w-full h-10 focus:outline-none focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-8 bg-gray-200 rounded-full py-3",ref:o})]})})})]})},T=function(){var e=Object(f.h)().state,t=Object(n.useState)(!1),s=Object(r.a)(t,2),c=s[0],a=s[1],l=function(){a(!c)};return e?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(U,{userHeaders:e,toggleSidebar:c,sidebarToggle:l}),Object(u.jsxs)("div",{className:"flex flex-col h-screen w-full",children:[Object(u.jsx)(I,{userHeaders:e}),Object(u.jsx)(A,{userHeaders:e,toggleSidebar:c,sidebarToggle:l})]})]})}):Object(u.jsx)(f.a,{to:"/"})},P=s.p+"static/media/BT21.42c38516.gif",B=s.p+"static/media/bubble.d07a5634.png",J=function(){var e=Object(f.g)(),t=Object(n.useState)(!1),s=Object(r.a)(t,2),c=s[0],a=s[1],l=Object(n.useState)(!1),o=Object(r.a)(l,2),i=o[0],d=o[1];Object(n.useEffect)((function(){localStorage.email&&localStorage.password&&b()}),[]);var b=function(){var t={email:localStorage.email,password:localStorage.password};m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/auth/sign_in"),t).then((function(t){var s=t.headers;e.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(t))})).catch((function(e){return p.b.error("Invalid credentials")}))};return Object(u.jsxs)("div",{className:"flex flex-col-reverse mobile:flex-row justify-between m-auto mobile:w-full",children:[Object(u.jsx)("div",{className:"p-10 flex flex-col mobile:h-screen w-full justify-around  items-center content-center mobile:w-6/12 bg-white",children:Object(u.jsx)("img",{src:P,alt:"illustration",className:"h-3/4"})}),Object(u.jsx)("div",{className:"flex-grow flex bg-primary justify-center items-center content-center",children:Object(u.jsxs)("div",{className:"text-secondary h-screen flex flex-col justify-center items-center content-center rounded-xl bg-primary rounded p-10",children:[Object(u.jsx)("img",{src:B,alt:"logo",className:"h-80"}),Object(u.jsx)("button",{onClick:function(){return a(!0)},className:"bg-secondary px-5 py-3 w-40 text-primary transition ease-in-out duration-150\r font-bold uppercase text-sm rounded-full hover:text-white motion-safe:hover:scale-110",type:"button",children:"Sign in"}),c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{setShowLoginModal:a}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{children:"Don\u2019t have an account?"}),Object(u.jsx)("span",{onClick:function(){return d(!0)},className:"font-medium text-secondary underline hover:font-bold hover:text-yellow-400",children:"Sign up here"}),i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(N,{setshowSignupModal:d}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{})]})})]})},G=function(){return m.a.defaults.baseURL="https://slackapi.avionschool.com/",Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{children:Object(u.jsx)(x,{children:Object(u.jsxs)(f.d,{children:[Object(u.jsx)(f.b,{exact:!0,path:"/home",children:Object(u.jsx)(J,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/login",children:Object(u.jsx)(y,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/signup",children:Object(u.jsx)(N,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/chatfeed",children:Object(u.jsx)(T,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/",children:Object(u.jsx)(J,{})})]})})}),Object(u.jsx)(p.a,{theme:"colored"})]})};l.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(G,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.764e49df.chunk.js.map