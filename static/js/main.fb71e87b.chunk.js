(this["webpackJsonpslack-chat-app"]=this["webpackJsonpslack-chat-app"]||[]).push([[0],{44:function(e,t,s){},85:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),n=s(14),l=s.n(n),o=s(21),r=(s(44),s(3)),i=s(27),d=function(e,t){return"PASS_TO_CHATFORM"===t.type?Object(i.a)(Object(i.a)({},e),{},{ChatInfo:t.payload}):e},u=s(1),b={ChatInfo:""},j=Object(c.createContext)(b),f=function(e){var t=e.children,s=Object(c.useReducer)(d,b),a=Object(r.a)(s,2),n=a[0],l=a[1];return Object(u.jsx)(j.Provider,{value:[n,l],children:t})},h=s(5),x=s(4),m=s.n(x),p=s(10),O=(s(65),s.p+"static/media/chim2.f3835cfe.png"),v=s.p+"static/media/chatbubble.26d29a27.png",g=s(12),y=function(e){var t=e.setShowLoginModal,s=Object(c.useState)(!1),a=Object(r.a)(s,2),n=a[0],l=a[1],o=Object(h.g)(),i=Object(c.useRef)(null),d=Object(c.useRef)(null);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"z-50 container  w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md h-screen mobile:h-auto rounded-lg px-8 py-2 pt-12 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){!function(e){e.preventDefault();var t={email:i.current.value,password:d.current.value};m.a.post("".concat("https://slackapi.avionschool.com","/api/v1/auth/sign_in"),t).then((function(e){p.b.success("You successfully logged in");var s=e.headers;o.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(e)),n&&(localStorage.email=t.email,localStorage.password=t.password),console.log(e)})).catch((function(e){return p.b.error("Check errors")}))}(e)},children:[Object(u.jsxs)("div",{className:"w-full flex items-center relative bottom-2",children:[Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(e){e.preventDefault(),t(!1)},children:Object(u.jsx)(g.a,{className:"h-8 w-8 mb-16 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})}),Object(u.jsxs)("div",{className:"flex justify-between pt-12 mobile:pt-0 mobile:w-3/4",children:[Object(u.jsx)("img",{src:O,alt:"chimchim",className:"relative h-28 mobile:left-16"}),Object(u.jsx)("img",{src:v,alt:"chatbubble",className:"relative bottom-2 right-8 mobile:right-0 h-24 mobile:h-28"})]})]}),Object(u.jsxs)("div",{className:"relative bottom-2",children:[Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email",ref:i})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password",ref:d})]}),Object(u.jsxs)("div",{className:"h-12 justify-center items-center content-center",children:[Object(u.jsx)("input",{type:"checkbox",className:"mr-2",checked:n,onChange:function(){l(!n)}}),Object(u.jsx)("span",{className:"checkmark",children:"Keep me logged in"})]}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white",children:"Sign In"})})]})]})})})},w=s.p+"static/media/chimchimmmm.6861fe93.png";var N=function(e){var t=e.setshowSignupModal,s=Object(h.g)(),a=Object(c.useRef)(null),n=Object(c.useRef)(null),l=Object(c.useRef)(null),o=Object(c.useState)(null),i=Object(r.a)(o,2),d=(i[0],i[1]),b="https://slackapi.avionschool.com";return Object(u.jsx)("div",{className:"z-50 container w-full  max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsxs)("form",{className:"bg-white shadow-md mobile:h-auto h-screen rounded-lg px-8 pt-8 pb-8 mb-4 font-Lato bg-primary",onSubmit:function(e){e.preventDefault();var t={email:a.current.value,password:n.current.value,password_confirmation:l.current.value};m.a.post("".concat(b,"/api/v1/auth/"),t).then((function(e){var t={email:a.current.value,password:n.current.value};m.a.post("".concat(b,"/api/v1/auth/sign_in"),t).then((function(t){var c=t.headers;console.log(e),console.log(t),p.b.success("You successfully registered"),a.current.value="",n.current.value="",l.current.value="",s.push({pathname:"/chatfeed",state:{headers:c}}),sessionStorage.setItem("headers",JSON.stringify(t)),console.log(t)})).catch((function(e){return p.b.error("Check errors")}))}))},children:[Object(u.jsxs)("div",{className:"relative bottom-5 right-2 w-full mobile:pt-0 pt-12 flex justify-between items-center content-center",children:[Object(u.jsx)("img",{src:w,alt:"chimchim",className:"h-28"}),Object(u.jsx)("h1",{className:"text-secondary desktop:text-2xl mobile:text-xs font-bold mr-4",children:"CREATE AN ACCOUNT"}),Object(u.jsx)("span",{className:"bg-transparent border-0 text-secondary text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return t(!1)},children:Object(u.jsx)(g.a,{className:"h-8 rounded-full flex items-center justify-center hover:bg-white hover:rounded-full transform hover:scale-110"})})]}),Object(u.jsxs)("div",{className:"mb-6 flex-col",children:[Object(u.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),Object(u.jsx)("input",{ref:a,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",placeholder:"enter email"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),Object(u.jsx)("input",{ref:n,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"enter password"})]}),Object(u.jsxs)("div",{className:"mb-6",children:[Object(u.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Confirm Password"}),Object(u.jsx)("input",{ref:l,className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",type:"password",placeholder:"confirm password"})]}),Object(u.jsx)("label",{htmlFor:"upload-button",children:Object(u.jsx)("span",{className:"image-button"})}),Object(u.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){d({files:e.target.files,text:""})}}),Object(u.jsx)("div",{className:"flex items-center justify-between",children:Object(u.jsx)("button",{className:"w-full bg-secondary text-primary font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline hover:text-white ",type:"submit",children:"Sign Up"})})]})})},C=function(e){var t=e.userHeaders,s=Object(h.g)(),a=Object(c.useState)({userHeaders:t}),n=Object(r.a)(a,2),l=(n[0],n[1]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("span",{className:"hover:text-secondary text-primary text-sm",onClick:function(){l([]),window.location.reload(),sessionStorage.clear(),localStorage.clear(),s.push("/")},children:"Logout"})})},S=function(e){var t=e.userHeaders;return Object(u.jsxs)("div",{className:"z-30 w-full justify-end flex px-5 text-white bg-yellow-400 h-6 content-center items-center ",children:[Object(u.jsx)("div",{className:"flex justify-around content-center items-center",children:Object(u.jsx)("span",{className:"pr-5 pl-1 text-sm",children:t.headers.uid})}),Object(u.jsx)(C,{userHeaders:t})]})},k=s(11),I=s(15),R=function(e){var t=e.handleAddChannelButtonClick,s=e.userHeaders,a=e.updateChannelList,n=e.setUpdateChannelList,l=Object(c.useRef)(null),o=Object(c.useRef)(null),i=Object(c.useState)([]),d=Object(r.a)(i,2),b=d[0],j=d[1],f=Object(c.useState)([]),h=Object(r.a)(f,2),x=h[0],p=h[1],O=[];var v=function(){b.map((function(e){var t,s,c=(t=x,s=e.toLowerCase(),t.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().includes(s.toLowerCase())}))})));O.push(c[0].id)})),console.log(O)};return Object(c.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),s).then((function(e){p(e.data.data)})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsx)("div",{className:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center",id:"modal-example-small",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-sm",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-gray-200 rounded-t",children:[Object(u.jsx)("h3",{className:"text-3xl font-semibold",children:"Create Channel"}),Object(u.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-gray-300 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:t,children:Object(u.jsx)("span",{className:"bg-transparent h-6 w-6 text-2xl block outline-none focus:outline-none",children:Object(u.jsx)(g.a,{})})})]}),Object(u.jsxs)("div",{className:"relative p-6 flex-auto",children:[Object(u.jsxs)("label",{className:"block",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Channel Name"}),Object(u.jsx)("input",{ref:o,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"new-channel"})]}),Object(u.jsxs)("label",{className:"block pt-4",children:[Object(u.jsx)("span",{className:"text-gray-700",children:"Add Members"}),Object(u.jsx)("input",{ref:l,className:"appearance-none border mt-1 block w-full focus:outline-none",placeholder:"johndoe@email.com"}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white px-2 mt-1 font-bold rounded",onClick:function(){j([].concat(Object(I.a)(b),[l.current.value]))},children:"Add"})]}),Object(u.jsx)("div",{children:b.map((function(e){return Object(u.jsx)("p",{children:e})}))})]}),Object(u.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-200 rounded-b",children:[Object(u.jsx)("button",{className:"text-yellow-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"bg-yellow-500 text-white active:bg-yellow-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",onClick:function(e){!function(e){e.preventDefault(),v(),m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/channels "),{name:o.current.value,user_ids:O},s).then((function(e){console.log(e),n(!a),t(),j([])})).catch((function(e){return console.log(e)}))}(e)},children:"Create Channel"})]})]})})})},F=function(e,t){var s=a.a.useRef();a.a.useEffect((function(){s.current=e}),[e]),a.a.useEffect((function(){if(null!==t){var e=setInterval((function(){s.current()}),t);return function(){return clearInterval(e)}}}),[t])},_=function(e){var t=e.userHeaders,s=e.channels,a=e.updateChatForm,n=Object(c.useState)([]),l=Object(r.a)(n,2),o=l[0],i=l[1],d=Object(c.useState)(!1),b=Object(r.a)(d,2),j=b[0],f=b[1],h=Object(c.useState)([]),x=Object(r.a)(h,2),p=x[0],O=x[1],v=Object(c.useState)([]),g=Object(r.a)(v,2),y=(g[0],g[1],Object(c.useRef)([])),w=[],N=Object(c.useRef)([]);Object(c.useEffect)((function(){S(),C()}),[]),F((function(){S(),C()}),5e3);var C=function(){y.current.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=User"),t).then((function(e){e.data.data[0]&&(N.current.some((function(t){return t.id===e.data.data[0].id}))||(N.current=[].concat(Object(I.a)(N.current),[e.data.data[0]]),i(N.current)))}))}))},S=function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),t).then((function(e){s.map((function(e){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels/").concat(e.id),t).then((function(e){e.data.data.channel_members.map((function(e){var t,s;t=y.current,s=e.user_id,-1===t.indexOf(s)&&t.push(s)}))}))})),R(e.data.data)})).catch((function(e){return console.log(e)}))},R=function(e){e.map((function(e){y.current.includes(e.id)&&w.push({value:{id:e.id,name:e.uid},label:e.uid})})),O(w)};return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"w-full text-left font-bold flex items-center hover:text-white p-1 cursor-pointer",onClick:function(){f(!j)},children:[Object(u.jsx)("span",{className:"px-1",children:j?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"Direct Messages"]}),j?o&&Object(u.jsx)(u.Fragment,{children:o.map((function(e){var s;return s=e.receiver.uid===t.headers.uid?e.sender:e.receiver,Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){a(s.id,s.uid,"User")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:s.uid})]})}))}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{className:"w-full flex sticky bottom-0  justify-center align-center py-2",children:Object(u.jsx)("button",{className:"w-11/12 rounded-full text-center text-secondary bg-yellow-300 hover:bg-yellow-400  py-2",onClick:function(){a(null,p,"User")},children:"New Message"})})]})},D=function(e){var t=e.userHeaders,s=e.toggleSidebar,a=(Object(c.useRef)(null),Object(c.useState)(!1)),n=Object(r.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)([]),d=Object(r.a)(i,2),b=d[0],f=d[1],h=Object(c.useState)(!0),x=Object(r.a)(h,2),p=x[0],O=x[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),y=g[0],w=g[1],N=Object(c.useState)(!1),C=Object(r.a)(N,2),S=C[0],I=C[1],F=Object(c.useState)(""),D=Object(r.a)(F,2),L=D[0],U=D[1],E=Object(c.useState)(""),H=Object(r.a)(E,2),z=H[0],M=H[1],A=Object(c.useContext)(j),T=Object(r.a)(A,2),P=(T[0],T[1]),B=[],J={ID:y,name:L,receiverClass:z},Y=function(e,t,s){w(e),U(t),M(s)};Object(c.useEffect)((function(){P({type:"PASS_TO_CHATFORM",payload:J})}),[y]);Object(c.useEffect)((function(){f([]),m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/channels"),t).then((function(e){if(e.data.errors)return null;e.data.data.map((function(e){return B.push(e)}))})).catch((function(e){console.log(e)})).finally((function(){f(B)}))}),[p]);var V=function(){o(!l)};return Object(u.jsxs)(u.Fragment,{children:[l?Object(u.jsx)(R,{handleAddChannelButtonClick:V,userHeaders:t,updateChannelList:p,setUpdateChannelList:O}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("div",{className:s?"absolute inset-y-0 left-0 z-40  transform  transition duration-200 ease-in-out mobile:translate-x-0 mobile:relative":"absolute inset-y-0 left-0 z-50 -translate-x-full transform  transition duration-200 ease-in-out mobile:translate-x-0 mobile:relative",children:Object(u.jsxs)("div",{className:"bg-secondary channels text-white text-opacity-70 overflow-y-scroll h-screen w-64 z-50 pt-2",children:[Object(u.jsxs)("div",{className:"channelsWrap",children:[Object(u.jsxs)("div",{className:"w-full text-left font-bold p-1 cursor-pointer flex items-center justify-between",children:[Object(u.jsxs)("div",{onClick:function(){I(!S)},className:"hover:text-white flex items-center w-full",children:[Object(u.jsx)("span",{className:"px-1",children:S?Object(u.jsx)(k.a,{}):Object(u.jsx)(k.b,{})}),"My Channels"]}),Object(u.jsx)("div",{className:"hover:text-white",onClick:V,children:Object(u.jsx)(k.c,{})})]}),S?b.map((function(e){return Object(u.jsxs)("label",{className:"w-full text-left hover:bg-yellow-900",onClick:function(){Y(e.id,e.name,"Channel")},children:[Object(u.jsx)("input",{type:"radio",name:"channel"}),Object(u.jsx)("span",{className:"pl-3 py-1",children:e.name})]})})):Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)(_,{userHeaders:t,channels:b,updateChatForm:Y})]})})]})},L=s(22),U=function(e){var t=e.userHeaders,s=Object(c.useContext)(j),a=Object(r.a)(s,2),n=a[0],l=(a[1],Object(c.useState)([])),o=Object(r.a)(l,2),i=o[0],d=o[1],b=Object(c.useState)([]),f=Object(r.a)(b,2),h=f[0],x=(f[1],Object(c.useState)([])),O=Object(r.a)(x,2),v=O[0],y=O[1],w=Object(c.useState)(!1),N=Object(r.a)(w,2),C=N[0],S=N[1],I=Object(c.useRef)([]),R=Object(c.useState)(),F=Object(r.a)(R,2),_=F[0],D=F[1],U="https://slackapi.avionschool.com",E=[];Object(c.useEffect)((function(){m.a.get("".concat(U,"/api/v1/channels/").concat(n.ChatInfo.ID),t).then((function(e){if(e.data.errors)return null;e.data.data.channel_members.forEach((function(e){i.forEach((function(t){t.id===e.user_id&&E.push(t)}))})),y(E)})).catch((function(e){console.log(e)}))}),[n,h]);return Object(c.useEffect)((function(){m.a.get("".concat(U,"/api/v1/users"),t).then((function(e){d(e.data.data),e.data.data.map((function(e){I.current.push({value:e.id,label:e.uid})})),console.log(I)})).catch((function(e){console.log(e)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"text-white active:text-primary font-bold uppercase text-sm px-6 py-3 outline-none focus:outline-none mb-1 ease-linear transition-all duration-150 relative right-0",type:"button",onClick:function(){return S(!0)},children:Object(u.jsx)(k.e,{className:"h-6 w-6"})}),C?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"text-black container  w-full max-w-xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 inset-0 z-50 outline-none focus:outline-none",children:Object(u.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-4xl",children:Object(u.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(u.jsxs)("div",{className:"w-full flex justify-between items-center content-center",children:[Object(u.jsx)("div",{className:"flex justify-between items-center px-6 content-center",children:Object(u.jsx)("span",{className:"text-3xl font-semibold",children:n.ChatInfo.name})}),Object(u.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:Object(u.jsx)("button",{className:"text-secondary background-transparent font-bold uppercase text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return S(!1)},children:Object(u.jsx)(g.a,{className:"h-6 w-6"})})})]}),Object(u.jsxs)("div",{className:"relative  p-6 flex flex-col max-h-72",children:[Object(u.jsx)("span",{className:"text-gray-500",children:"Members"}),Object(u.jsx)("div",{className:"z-10 overflow-y-auto my-3",children:v.map((function(e){return Object(u.jsx)("ul",{className:"my-4 overflow-auto text-sm z-0",children:e.uid})}))}),Object(u.jsxs)("div",{children:[Object(u.jsx)(L.a,{options:I.current,onChange:function(e){D(e.value)}}),Object(u.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white w-14 h-7 px-2 mt-1 font-bold rounded",onClick:function(){m.a.post("".concat(U,"/api/v1/channel/add_member"),{id:n.ChatInfo.ID,member_id:_},t).then((function(e){console.log(e),p.b.success("User has been added!"),D()})).catch((function(e){return alert(e)}))},children:"Add"})]})]})]})})}),Object(u.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},E=function(){var e=Object(c.useRef)();return Object(c.useEffect)((function(){return e.current.scrollIntoView()})),Object(u.jsx)("div",{ref:e})},H=s.p+"static/media/NoChatYet.281bc00c.svg",z="h-1 w-6 my-0.5 rounded-full bg-secondary transition ease transform duration-300",M=function(e){var t,s,a=e.userHeaders,n=e.sidebarToggle,l=e.toggleSidebar,o=Object(c.useRef)(null),i=Object(c.useRef)([]),d=[],b="https://slackapi.avionschool.com",f=Object(c.useContext)(j),h=Object(r.a)(f,2),x=h[0],p=(h[1],Object(c.useState)(!1)),O=Object(r.a)(p,2),v=O[0],g=O[1],y=Object(c.useState)([]),w=Object(r.a)(y,2),N=w[0],C=w[1],S=Object(c.useState)([]),R=Object(r.a)(S,2),_=R[0],D=R[1],M=Object(c.useState)(),A=Object(r.a)(M,2),T=A[0],P=A[1],B=Object(c.useState)(!1),J=Object(r.a)(B,2);J[0],J[1];Object(c.useEffect)((function(){m.a.get("".concat(m.a.defaults.baseURL,"/api/v1/users"),a).then((function(e){var t;D(null===(t=e.data)||void 0===t?void 0:t.data)})).catch((function(e){console.log(e)})),C([])}),[]),!x.ChatInfo.ID&&x.ChatInfo.name&&x.ChatInfo.name.map((function(e){_.map((function(t){t.id===e&&d.push({value:{id:t.id,name:t.uid},label:t.uid})}))}));var Y=function(e,t){m.a.get("".concat(b,"/api/v1/messages?receiver_id=").concat(e,"&receiver_class=").concat(t),a).then((function(e){if(0===i.current.length||e.data.data.length!==i.current.length){if(C([]),e.data.errors)return null;e.data.data.map((function(e){i.current.push(e),C((function(t){return[].concat(Object(I.a)(t),[e])}))}))}g(!1)})).catch((function(e){console.log(e)}))};Object(c.useEffect)((function(){return g(!0),"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?Y(x.ChatInfo.ID,x.ChatInfo.receiverClass):"object"===typeof x.ChatInfo.name&&null===x.ChatInfo.ID||Y(T.value.id,"User"),C([])}),[x,T]),F((function(){"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?Y(x.ChatInfo.ID,x.ChatInfo.receiverClass):"object"===typeof x.ChatInfo.name&&null===x.ChatInfo.ID||Y(T.value.id,"User")}),1e3);var V=function(e,t){e.preventDefault(),m.a.post("".concat(b,"/api/v1/messages"),{receiver_id:t,receiver_class:x.ChatInfo.receiverClass,body:o.current.value},a).then((function(e){"object"!==typeof x.ChatInfo.name||null!==x.ChatInfo.ID?Y(x.ChatInfo.ID,x.ChatInfo.receiverClass):Y(T.value.id,"User"),o.current.value=""})).catch((function(e){return alert(e)}))},W=[];return Object(u.jsxs)("div",{className:"flex h-full overflow-auto flex-col",children:[Object(u.jsxs)("div",{class:"z-10 bg-yellow-300 text-white sticky top-0 flex items-center justify-between mobile:flex-row-reverse",children:[x.ChatInfo.receiverClass?Object(u.jsx)(U,{userHeaders:a}):Object(u.jsx)(u.Fragment,{}),"object"!==typeof x.ChatInfo.name?Object(u.jsx)("div",{className:" font-bold truncate px-6 text-xl",children:x.ChatInfo.name}):Object(u.jsx)(L.a,{className:"w-full px-2 text-secondary outline-none",value:T,options:x.ChatInfo.name,onChange:function(e){P(e),Y(e.value.id,"User")}}),Object(u.jsx)("div",{className:"mobile:block tablet:hidden desktop:hidden",children:Object(u.jsxs)("button",{className:"flex flex-col h-12 w-12 rounded justify-center items-center",onClick:function(){return n()},children:[Object(u.jsx)("div",{className:"".concat(z," ").concat(l?"rotate-45 translate-y-2 opacity-100":"opacity-100")}),Object(u.jsx)("div",{className:"".concat(z," ").concat(l?"opacity-0":"opacity-100")}),Object(u.jsx)("div",{className:"".concat(z," ").concat(l?"-rotate-45 -translate-y-2 opacity-100":"opacity-100")})]})})]}),Object(u.jsx)("div",{className:"flex-1 flex flex-col",children:Object(u.jsxs)("div",{className:"h-full sm:items-center px-5 bg-yellow-100 w-full z-0 ",children:[x.ChatInfo.name?v?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"}),Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]})]}),Object(u.jsxs)("div",{class:"animate-pulse flex space-x-4 py-5",children:[Object(u.jsxs)("div",{class:"flex-1 space-y-4 py-1",children:[Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded w-3/4"}),Object(u.jsx)("div",{class:"space-y-2",children:Object(u.jsx)("div",{class:"h-4 bg-yellow-400 rounded"})})]}),Object(u.jsx)("div",{class:"rounded-full bg-yellow-400 h-12 w-12"})]})]}):Object(u.jsx)("div",{children:N.map((function(e,c){var n;return W=[],t=new Date(e.created_at).toDateString().slice(0,15),s=function(e){var t=new Date(e),s=t.getHours(),c=t.getMinutes(),a=s>=12?"PM":"AM";return c<10&&(c="0"+c),"".concat(s=(s%=12)||12,":").concat(c," ").concat(a)}(e.created_at),t!==new Date(null===(n=N[c-1])||void 0===n?void 0:n.created_at).toDateString()&&W.push(Object(u.jsxs)("div",{className:"w-full flex justify-center items-center pt-2",children:[Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"}),Object(u.jsx)("div",{className:"w-auto px-1 border border-secondary rounded-full flex justify-center items-center content-center",children:Object(u.jsxs)("span",{className:"text-xs",children:[" ",t," "]})}),Object(u.jsx)("hr",{className:"flex-1 border-solid border-secondary"})]})),W.push(Object(u.jsx)("ul",{className:"flex justify-between",children:Object(u.jsx)("div",{className:"w-full",children:Object(u.jsxs)("div",{className:"flex content-center items-center",children:[Object(u.jsx)(k.d,{className:"h-10 w-10 text-secondary"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("span",{className:"px-1 text-xs font-bold",children:[" ",e.sender.uid," "]}),Object(u.jsxs)("span",{className:"text-xs",children:[" ",s," "]})]}),Object(u.jsx)("span",{className:e.sender.uid===a.headers.uid?"chat_bubble outgoing text-sm shadow-md":"chat_bubble incoming text-sm shadow-md",children:e.body})]})]})})})),W}))}):Object(u.jsxs)("div",{className:"h-full relative flex flex-col justify-center text-center items-center content-center",children:[Object(u.jsx)("img",{src:H,alt:"no chat",className:"h-80"}),Object(u.jsx)("span",{className:"pt-8 text-md mobile:text-center font-Poppins font-bold text-yellow-300",children:"Select a channel/user to begin chatting"})]}),Object(u.jsx)(E,{userHeaders:a})]})}),Object(u.jsx)("form",{className:x.ChatInfo.name?"flex-1w-full sticky bottom-0 bg-secondary z-10":"hidden",children:Object(u.jsx)("div",{className:"p-2 sm:mb-0",children:Object(u.jsxs)("div",{className:"relative flex",children:[Object(u.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center content-center px-1",children:Object(u.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center rounded-full h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-300 focus:outline-none",onClick:function(e){"object"===typeof x.ChatInfo.name?V(e,T.value.id):V(e,x.ChatInfo.ID)},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 transform rotate-90",children:Object(u.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})}),Object(u.jsx)("input",{type:"text",placeholder:"Write Something...",className:"w-full h-10 focus:outline-none focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-8 bg-gray-200 rounded-full py-3",ref:o})]})})})]})},A=function(){var e=Object(h.h)().state,t=Object(c.useState)(!1),s=Object(r.a)(t,2),a=s[0],n=s[1],l=function(){n(!a)};return e?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(D,{userHeaders:e,toggleSidebar:a,sidebarToggle:l}),Object(u.jsxs)("div",{className:"flex flex-col h-screen w-full",children:[Object(u.jsx)(S,{userHeaders:e}),Object(u.jsx)(M,{userHeaders:e,toggleSidebar:a,sidebarToggle:l})]})]})}):Object(u.jsx)(h.a,{to:"/"})},T=s.p+"static/media/BT21.42c38516.gif",P=s.p+"static/media/bubble.d07a5634.png",B=function(){var e=Object(h.g)(),t=Object(c.useState)(!1),s=Object(r.a)(t,2),a=s[0],n=s[1],l=Object(c.useState)(!1),o=Object(r.a)(l,2),i=o[0],d=o[1];Object(c.useEffect)((function(){localStorage.email&&localStorage.password&&b()}),[]);var b=function(){var t={email:localStorage.email,password:localStorage.password};m.a.post("".concat(m.a.defaults.baseURL,"/api/v1/auth/sign_in"),t).then((function(t){var s=t.headers;e.push({pathname:"/chatfeed",state:{headers:s}}),sessionStorage.setItem("headers",JSON.stringify(t))})).catch((function(e){return p.b.error("Invalid credentials")}))};return Object(u.jsxs)("div",{className:"flex flex-col-reverse mobile:flex-row justify-between m-auto mobile:w-full",children:[Object(u.jsx)("div",{className:"p-10 flex flex-col mobile:h-screen w-full justify-around  items-center content-center mobile:w-6/12 bg-white",children:Object(u.jsx)("img",{src:T,alt:"illustration",className:"h-3/4"})}),Object(u.jsx)("div",{className:"flex-grow flex bg-primary justify-center items-center content-center",children:Object(u.jsxs)("div",{className:"text-secondary h-screen flex flex-col justify-center items-center content-center rounded-xl bg-primary rounded p-10",children:[Object(u.jsx)("img",{src:P,alt:"logo",className:"h-80"}),Object(u.jsx)("button",{onClick:function(){return n(!0)},className:"bg-secondary px-5 py-3 w-40 text-primary transition ease-in-out duration-150\r font-bold uppercase text-sm rounded-full hover:text-white motion-safe:hover:scale-110",type:"button",children:"Sign in"}),a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{setShowLoginModal:n}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{children:"Don\u2019t have an account?"}),Object(u.jsx)("span",{onClick:function(){return d(!0)},className:"font-medium text-secondary underline hover:font-bold hover:text-yellow-400",children:"Sign up here"}),i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(N,{setshowSignupModal:d}),Object(u.jsx)("div",{className:"opacity-60 fixed inset-0 z-40 bg-black"})]}):Object(u.jsx)(u.Fragment,{})]})})]})},J=function(){return m.a.defaults.baseURL="https://slackapi.avionschool.com/",Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{children:Object(u.jsx)(f,{children:Object(u.jsxs)(h.d,{children:[Object(u.jsx)(h.b,{exact:!0,path:"/home",children:Object(u.jsx)(B,{})}),Object(u.jsx)(h.b,{exact:!0,path:"/login",children:Object(u.jsx)(y,{})}),Object(u.jsx)(h.b,{exact:!0,path:"/signup",children:Object(u.jsx)(N,{})}),Object(u.jsx)(h.b,{exact:!0,path:"/chatfeed",children:Object(u.jsx)(A,{})}),Object(u.jsx)(h.b,{exact:!0,path:"/",children:Object(u.jsx)(B,{})})]})})}),Object(u.jsx)(p.a,{theme:"colored"})]})};l.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(J,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.fb71e87b.chunk.js.map